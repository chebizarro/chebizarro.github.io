<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Pelican Blog - Python</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/pages/about.html">About</a></li>
                    <li><a href="/category/open-source.html">Open Source</a></li>
                    <li class="active"><a href="/category/python.html">Python</a></li>
                    <li><a href="/category/vala.html">Vala</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/easy-python-for-dia.html">An easier way to write Python plugins for Dia</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-01-07T10:00:00+00:00">
                Published: Thu 07 January 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/chris-daley.html">Chris Daley</a>
        </address>
<p>In <a href="/category/python.html">Python</a>.</p>
<p>tags: <a href="/tag/dia.html">Dia</a> <a href="/tag/python.html">Python</a> <a href="/tag/open-source.html">Open Source</a> <a href="/tag/programming.html">Programming</a> <a href="/tag/tdd.html">TDD</a> <a href="/tag/bdd.html">BDD</a> </p>Translations:
        <a href="/easy-python-for-dia-es.html">es</a>

</footer><!-- /.post-info --><p><a href="https://wiki.gnome.org/action/show/Apps/Dia">Dia</a> is a free and open source diagram creation program that runs on the main dekstop platforms. It's getting a bit long in the tooth, but its still a great tool. It's very easy to extend with plugins written in Python to add new features but the actual process of writing those plugins is a little bit more complicated.</p>
<p>Firstly, the Python API is hard to find <a href="https://projects-old.gnome.org/dia/pydia.html">online</a>. You can generate a diagram of the API from within Dia itself from the Help menu, but this doesn't give you a whole lot of information and the format is a little incovenient. The API can be a little tricky to navigate, and I'll share some tips on that in a later post, but the biggest problem lies in testing the plugins that you write. Dia loads all of its plugins at startup and they can't be modified during runtime which makes testing and debugging a laborious process. It's possible to write and test the parts of your plugin that don't depend on Dia separately but once you start interacting with the UI it all starts to get bogged down again.</p>
<p><img alt="My what a big API you have!" src="/images/dia-python-api.png" /></p>
<p>Frustrated by this and wanting to develop a plugin using Test Driven Development (TDD) techniques, I wrote a small Python module that mocks the Dia API. This way you can write and test the vast majority of your plugin without having to run Dia at all! There are some limitations - any interactions with the UI for example have to be done in Dia either manually or with an automation framework, and you can't generate usable diagrams from it. It should, however, reduce the amount of time and bugs it takes to get your plugin up and running. Don't forget to Open Source it and share it with the world!</p>
<p>If this is something you might find useful, you can check it out <a href="https://github.com/chebizarro/dia-test">here</a>. I originally developed it to meet the needs of a particular project I was working on at the time so there are some parts that may not be fully implemented, but I'm happy to take bug reports and pull requests. </p>
<p>Installation is easy:</p>
<div class="highlight"><pre><span class="nv">$ </span>python setup.py install
</pre></div>


<p>There is no practical difference in how you write your code and any existing plugin can use the module without modification. When the plugin runs outside of Dia, it loads the mock module, when it is run inside Dia, it loads the real one.</p>
<p>Now you're all set up to start writing plugins for Dia the easy way!</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>